<?xml version="1.0"?>

<!--
  This is the activeTAPI.COM NLog configuration file.
  It must be stored under: %AppData%\Schmidt e-Services GmbH\activeTAPI.COM\NLog.config
-->
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.netfx35.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <variable name="LogfileDirectory" value="${specialfolder:folder=ApplicationData}\Schmidt e-Services GmbH\activeTAPI.COM\Logs"/>
  <variable name="LogfileName" value="ComChecksv2013_LOG"/>
  <variable name="LogfileExt" value="NLog"/>


  <targets>
    <target name="UDP4Localhost" xsi:type="NLogViewer"  address="udp4://localhost:8081"
            includeNdc="true" includeMdc="true" includeNLogData="true" includeSourceInfo="true" >
      <!--<layout xsi:type="Log4JXmlEventLayout" />-->
      <parameter name="Message"  layout="${message}${onexception:${NewLine}EXCEPTION\:${exception:format=tostring}}" />
      <parameter name="Identity" layout="${windows-identity}" />
    </target>


    <!--<target xsi:type="ColoredConsole" name="ColoredConsole" layout="${longdate}|${level:uppercase=true}|${logger}|${message}" />-->
    <target xsi:type="ColoredConsole" name="ColoredConsole" layout="${level:uppercase=true}: ${message}" />


    <target name="Logfile" xsi:type="File"
           fileName="${LogfileDirectory}\${LogfileName}.${LogfileExt}"
           createDirs="true" archiveFileName="${LogfileDirectory}\${LogfileName}.{#}.${LogfileExt}" archiveEvery="Hour" 
           archiveNumbering="Rolling" maxArchiveFiles="5"
           layout="${longdate}|${level:uppercase=true}|${logger}|${windows-identity}|${threadid}|${message}|${onexception:${NewLine}EXCEPTION\:${exception:format=tostring}}" />

  </targets>

  <rules>
    <!--<logger name="*" minlevel="Debug" writeTo="UDP4Localhost,Logfile"/>-->
    <!--<logger name="*" minlevel="Info" writeTo="ApplicationLogWindow"/>-->
    <!--<logger name="*" minlevel="Debug" writeTo="ColoredConsole,Logfile,UDP4Localhost"/>-->
    <logger name="*" minlevel="Debug" writeTo="ColoredConsole,Logfile"/>
  </rules>
</nlog>



